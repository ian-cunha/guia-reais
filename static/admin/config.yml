locale: 'pt'
backend:
  name: git-gateway
  branch: main
publish_mode: editorial_workflow
media_folder: "static/img"
public_folder: "/img"
collections:
  # ===================================================================
  # COLEÇÃO PARA GERENCIAR AS SUBPASTAS
  # ===================================================================
  - name: "settings"
    label: "Gerenciar Subpastas"
    files:
      - label: "Listas de Subpastas"
        name: "categories"
        file: "src/data/subpastas.json"
        fields:
          - label: "Subpastas de Tutoriais"
            name: "tutorial_subpastas"
            widget: "list"
            summary: "{{fields.name}}"
            fields:
              - { label: "Nome da Subpasta", name: "name", widget: "string" }
          - label: "Subpastas de API"
            name: "api_subpastas"
            widget: "list"
            summary: "{{fields.name}}"
            fields:
              - { label: "Nome da Subpasta", name: "name", widget: "string" }

  # ===================================================================
  # COLEÇÃO DE TUTORIAIS
  # ===================================================================
  - name: "posts"
    label: "Tutoriais"
    folder: "docs/tutoriais"
    create: true
    slug: "{{category}}/{{slug}}"
    view_groups:
      - label: "Subpastas"
        field: "category"
    fields:
      - label: "Subpasta"
        name: "category"
        widget: "relation"
        collection: "settings"
        file: "categories"
        search_fields: ["tutorial_subpastas.*.name"]
        display_fields: ["tutorial_subpastas.*.name"]
        value_field: "tutorial_subpastas.*.name"
        required: false
        default: ""
        hint: "Deixe em branco para postar na raiz da seção (sem subpasta)."
      - { label: "Título", name: "title", widget: "string" }
      - { label: "Posição na Barra Lateral", name: "sidebar_position", widget: "number" }
      - { label: "Corpo", name: "body", widget: "markdown" }

  # ===================================================================
  # COLEÇÃO DE API REFERÊNCIAS
  # ===================================================================
  - name: "posts-2"
    label: "API Referências"
    folder: "docs/api-referencias"
    create: true
    slug: "{{category}}/{{slug}}"
    view_groups:
      - label: "Subpastas"
        field: "category"
    fields:
      - label: "Subpasta"
        name: "category"
        widget: "relation"
        collection: "settings"
        file: "categories"
        search_fields: ["api_subpastas.*.name"]
        display_fields: ["api_subpastas.*.name"]
        value_field: "api_subpastas.*.name"
        required: false
        default: ""
        hint: "Deixe em branco para postar na raiz da seção (sem subpasta)."
      - { label: "Título", name: "title", widget: "string" }
      - { label: "Posição na Barra Lateral", name: "sidebar_position", widget: "number" }
      - { label: "Corpo", name: "body", widget: "markdown" }